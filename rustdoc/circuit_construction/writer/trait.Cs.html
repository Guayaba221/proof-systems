<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="This trait includes all the operations that can be executed by the elements in the circuits. It allows for different behaviours depending on the struct for which it is implemented for. In particular, the circuit mode and the witness generation mode."><title>Cs in circuit_construction::writer - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-c4dbdcde0fbd8430.css" id="mainThemeStyle"><div id="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="circuit_construction" data-themes="" data-resource-suffix="" data-rustdoc-version="1.70.0-nightly (1db9c061d 2023-03-21)" data-search-js="search-a6dd7f063a44c279.js" data-settings-js="settings-f0c5c39777a9a2f6.js" data-settings-css="settings-0bcba95ff279c1db.css" data-theme-light-css="light-db279b6232be9c13.css" data-theme-dark-css="dark-cf923f49f397b216.css" data-theme-ayu-css="ayu-be46fdc453a55015.css" ></div><script src="../../static.files/storage-9184409068f70b79.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-f5a2577c5297a973.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../../static.files/light-db279b6232be9c13.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../../static.files/dark-cf923f49f397b216.css"><link rel="stylesheet" href="../../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../circuit_construction/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../../circuit_construction/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Cs</a></h2><div class="sidebar-elems"><section><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.cached_constants">cached_constants</a></li><li><a href="#tymethod.curr_gate_count">curr_gate_count</a></li><li><a href="#tymethod.gate">gate</a></li><li><a href="#tymethod.generic_queue">generic_queue</a></li><li><a href="#tymethod.var">var</a></li></ul><h3><a href="#provided-methods">Provided Methods</a></h3><ul class="block"><li><a href="#method.add_group">add_group</a></li><li><a href="#method.assert_add_group">assert_add_group</a></li><li><a href="#method.assert_eq">assert_eq</a></li><li><a href="#method.assert_pack">assert_pack</a></li><li><a href="#method.cond_select">cond_select</a></li><li><a href="#method.constant">constant</a></li><li><a href="#method.double">double</a></li><li><a href="#method.endo">endo</a></li><li><a href="#method.endo_scalar">endo_scalar</a></li><li><a href="#method.generic">generic</a></li><li><a href="#method.poseidon">poseidon</a></li><li><a href="#method.scalar">scalar</a></li><li><a href="#method.scalar_mul">scalar_mul</a></li><li><a href="#method.scale">scale</a></li></ul><h3><a href="#implementors">Implementors</a></h3></section><h2><a href="index.html">In circuit_construction::writer</a></h2></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Trait <a href="../index.html">circuit_construction</a>::<wbr><a href="index.html">writer</a>::<wbr><a class="trait" href="#">Cs</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../../src/circuit_construction/writer.rs.html#116-848">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub trait Cs&lt;F: <a class="trait" href="../prologue/trait.PrimeField.html" title="trait circuit_construction::prologue::PrimeField">PrimeField</a>&gt; {
<details class="toggle type-contents-toggle"><summary class="hideme"><span>Show 19 methods</span></summary>    // Required methods
    fn <a href="#tymethod.var" class="fn">var</a>&lt;G&gt;(&amp;mut self, g: G) -&gt; <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;
       <span class="where">where G: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.FnOnce.html" title="trait core::ops::function::FnOnce">FnOnce</a>() -&gt; F</span>;
<span class="item-spacer"></span>    fn <a href="#tymethod.curr_gate_count" class="fn">curr_gate_count</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>;
<span class="item-spacer"></span>    fn <a href="#tymethod.gate" class="fn">gate</a>(&amp;mut self, g: <a class="struct" href="struct.GateSpec.html" title="struct circuit_construction::writer::GateSpec">GateSpec</a>&lt;F&gt;);
<span class="item-spacer"></span>    fn <a href="#tymethod.cached_constants" class="fn">cached_constants</a>(&amp;mut self, x: F) -&gt; <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.generic_queue" class="fn">generic_queue</a>(&amp;mut self, gate: <a class="struct" href="struct.GateSpec.html" title="struct circuit_construction::writer::GateSpec">GateSpec</a>&lt;F&gt;) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="struct.GateSpec.html" title="struct circuit_construction::writer::GateSpec">GateSpec</a>&lt;F&gt;&gt;;

    // Provided methods
    fn <a href="#method.endo_scalar" class="fn">endo_scalar</a>&lt;G, N: BigInteger&gt;(&amp;mut self, length: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>, g: G) -&gt; <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;
       <span class="where">where G: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.FnOnce.html" title="trait core::ops::function::FnOnce">FnOnce</a>() -&gt; N</span> { ... }
<span class="item-spacer"></span>    fn <a href="#method.scalar" class="fn">scalar</a>&lt;G, Fr: <a class="trait" href="../prologue/trait.PrimeField.html" title="trait circuit_construction::prologue::PrimeField">PrimeField</a>&gt;(
        &amp;mut self,
        length: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>,
        g: G
    ) -&gt; <a class="struct" href="struct.ShiftedScalar.html" title="struct circuit_construction::writer::ShiftedScalar">ShiftedScalar</a>&lt;F&gt;
       <span class="where">where G: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.FnOnce.html" title="trait core::ops::function::FnOnce">FnOnce</a>() -&gt; Fr</span> { ... }
<span class="item-spacer"></span>    fn <a href="#method.assert_eq" class="fn">assert_eq</a>(&amp;mut self, x1: <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;, x2: <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;) { ... }
<span class="item-spacer"></span>    fn <a href="#method.constant" class="fn">constant</a>(&amp;mut self, x: F) -&gt; <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt; { ... }
<span class="item-spacer"></span>    fn <a href="#method.generic" class="fn">generic</a>(&amp;mut self, coeffs: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.array.html">[F; 5]</a>, vars: [<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;&gt;; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.array.html">3</a>]) { ... }
<span class="item-spacer"></span>    fn <a href="#method.scale" class="fn">scale</a>(&amp;mut self, x: F, v: <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;) -&gt; <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt; { ... }
<span class="item-spacer"></span>    fn <a href="#method.add_group" class="fn">add_group</a>(
        &amp;mut self,
        zero: <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;,
        (x1, y1): (<a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;, <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;),
        (x2, y2): (<a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;, <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;)
    ) -&gt; (<a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;, <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;) { ... }
<span class="item-spacer"></span>    fn <a href="#method.double" class="fn">double</a>(
        &amp;mut self,
        zero: <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;,
        (x1, y1): (<a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;, <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;)
    ) -&gt; (<a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;, <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;) { ... }
<span class="item-spacer"></span>    fn <a href="#method.assert_add_group" class="fn">assert_add_group</a>(
        &amp;mut self,
        zero: <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;,
        (x1, y1): (<a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;, <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;),
        (x2, y2): (<a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;, <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;),
        (x3, y3): (<a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;, <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;)
    ) { ... }
<span class="item-spacer"></span>    fn <a href="#method.cond_select" class="fn">cond_select</a>(&amp;mut self, b: <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;, t: <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;, f: <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;) -&gt; <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt; { ... }
<span class="item-spacer"></span>    fn <a href="#method.scalar_mul" class="fn">scalar_mul</a>(
        &amp;mut self,
        zero: <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;,
        (xt, yt): (<a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;, <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;),
        scalar: <a class="struct" href="struct.ShiftedScalar.html" title="struct circuit_construction::writer::ShiftedScalar">ShiftedScalar</a>&lt;F&gt;
    ) -&gt; (<a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;, <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;) { ... }
<span class="item-spacer"></span>    fn <a href="#method.endo" class="fn">endo</a>(
        &amp;mut self,
        zero: <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;,
        constants: &amp;<a class="struct" href="../constants/struct.Constants.html" title="struct circuit_construction::constants::Constants">Constants</a>&lt;F&gt;,
        (xt, yt): (<a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;, <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;),
        scalar: <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;,
        length_in_bits: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>
    ) -&gt; (<a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;, <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;) { ... }
<span class="item-spacer"></span>    fn <a href="#method.assert_pack" class="fn">assert_pack</a>(&amp;mut self, zero: <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;, x: <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;, bits_lsb: &amp;[<a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;]) { ... }
<span class="item-spacer"></span>    fn <a href="#method.poseidon" class="fn">poseidon</a>(
        &amp;mut self,
        constants: &amp;<a class="struct" href="../constants/struct.Constants.html" title="struct circuit_construction::constants::Constants">Constants</a>&lt;F&gt;,
        input: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;&gt;
    ) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;&gt; { ... }
</details>}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>This trait includes all the operations that can be executed
by the elements in the circuits.
It allows for different behaviours depending on the struct for
which it is implemented for.
In particular, the circuit mode and the witness generation mode.</p>
</div></details><h2 id="required-methods" class="small-section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.var" class="method"><a class="srclink rightside" href="../../src/circuit_construction/writer.rs.html#131-133">source</a><h4 class="code-header">fn <a href="#tymethod.var" class="fn">var</a>&lt;G&gt;(&amp;mut self, g: G) -&gt; <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;<span class="where fmt-newline">where
    G: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.FnOnce.html" title="trait core::ops::function::FnOnce">FnOnce</a>() -&gt; F,</span></h4></section></summary><div class="docblock"><p>In cases where you want to create a free variable in the circuit,
as in the variable is not constrained <em>yet</em>
and can be anything that the prover wants.
For example, division can be implemented as:</p>

<div class="example-wrap ignore"><a href="#" class="tooltip" title="This example is not tested">ⓘ</a><pre class="rust rust-example-rendered"><code><span class="kw">let </span>a = sys.constant(<span class="number">5u32</span>.into());
<span class="kw">let </span>b = sys.constant(<span class="number">10u32</span>.into());
<span class="kw">let </span>c = sys.var(|| {
   b.value * a.value.inverse().unwrap()
});
sys.assert_eq(a * c, b);</code></pre></div>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.curr_gate_count" class="method"><a class="srclink rightside" href="../../src/circuit_construction/writer.rs.html#136">source</a><h4 class="code-header">fn <a href="#tymethod.curr_gate_count" class="fn">curr_gate_count</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a></h4></section></summary><div class="docblock"><p>Returns the number of gates that the current <a href="trait.Cs.html" title="trait circuit_construction::writer::Cs">Self</a> contains.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.gate" class="method"><a class="srclink rightside" href="../../src/circuit_construction/writer.rs.html#180">source</a><h4 class="code-header">fn <a href="#tymethod.gate" class="fn">gate</a>(&amp;mut self, g: <a class="struct" href="struct.GateSpec.html" title="struct circuit_construction::writer::GateSpec">GateSpec</a>&lt;F&gt;)</h4></section></summary><div class="docblock"><p>In circuit mode, adds a gate to the circuit.
In witness generation mode, adds the corresponding row to the witness.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.cached_constants" class="method"><a class="srclink rightside" href="../../src/circuit_construction/writer.rs.html#201">source</a><h4 class="code-header">fn <a href="#tymethod.cached_constants" class="fn">cached_constants</a>(&amp;mut self, x: F) -&gt; <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;</h4></section></summary><div class="docblock"><p>Checks if a constant <code>x</code> is already in the cached constants of <code>self</code> and returns it.
Otherwise, it creates a variable for it and caches it.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.generic_queue" class="method"><a class="srclink rightside" href="../../src/circuit_construction/writer.rs.html#223">source</a><h4 class="code-header">fn <a href="#tymethod.generic_queue" class="fn">generic_queue</a>(&amp;mut self, gate: <a class="struct" href="struct.GateSpec.html" title="struct circuit_construction::writer::GateSpec">GateSpec</a>&lt;F&gt;) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="struct.GateSpec.html" title="struct circuit_construction::writer::GateSpec">GateSpec</a>&lt;F&gt;&gt;</h4></section></summary><div class="docblock"><p>Stores a generic gate until it can combine two of them
into a double generic gate.</p>
</div></details></div><h2 id="provided-methods" class="small-section-header">Provided Methods<a href="#provided-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="method.endo_scalar" class="method"><a class="srclink rightside" href="../../src/circuit_construction/writer.rs.html#141-152">source</a><h4 class="code-header">fn <a href="#method.endo_scalar" class="fn">endo_scalar</a>&lt;G, N: BigInteger&gt;(&amp;mut self, length: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>, g: G) -&gt; <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;<span class="where fmt-newline">where
    G: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.FnOnce.html" title="trait core::ops::function::FnOnce">FnOnce</a>() -&gt; N,</span></h4></section></summary><div class="docblock"><p>Returns a variable containing a field element as value that is
computed as the equivalent <code>BigInteger</code> number returned by
function <code>g</code>, only if the length is a multiple of 4.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.scalar" class="method"><a class="srclink rightside" href="../../src/circuit_construction/writer.rs.html#156-176">source</a><h4 class="code-header">fn <a href="#method.scalar" class="fn">scalar</a>&lt;G, Fr: <a class="trait" href="../prologue/trait.PrimeField.html" title="trait circuit_construction::prologue::PrimeField">PrimeField</a>&gt;(&amp;mut self, length: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>, g: G) -&gt; <a class="struct" href="struct.ShiftedScalar.html" title="struct circuit_construction::writer::ShiftedScalar">ShiftedScalar</a>&lt;F&gt;<span class="where fmt-newline">where
    G: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.FnOnce.html" title="trait core::ops::function::FnOnce">FnOnce</a>() -&gt; Fr,</span></h4></section></summary><div class="docblock"><p>This function creates a <a href="struct.ShiftedScalar.html" title="struct circuit_construction::writer::ShiftedScalar"><code>ShiftedScalar</code></a> variable from a field element that is
returned by function <code>g()</code>, and a length that should be a multiple of 5.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.assert_eq" class="method"><a class="srclink rightside" href="../../src/circuit_construction/writer.rs.html#186-197">source</a><h4 class="code-header">fn <a href="#method.assert_eq" class="fn">assert_eq</a>(&amp;mut self, x1: <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;, x2: <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;)</h4></section></summary><div class="docblock"><p>Creates a <code>Generic</code> gate that constrains if two variables are equal.
This is done by setting <code>x1</code> in the left wire and <code>x2</code> in the right wire
with left coefficient <code>1</code> and right coefficient <code>-1</code>, so that <code>x1 - x2 = 0</code>.  </p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.constant" class="method"><a class="srclink rightside" href="../../src/circuit_construction/writer.rs.html#207-219">source</a><h4 class="code-header">fn <a href="#method.constant" class="fn">constant</a>(&amp;mut self, x: F) -&gt; <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;</h4></section></summary><div class="docblock"><p>Creates a <code>Generic</code> gate to include a constant in the circuit, and returns the variable containing it.
It sets the left wire to be the variable containing the constant <code>x</code> and the rest to zero.
Then the left coefficient is set to one and the coefficient for constants is set to <code>-x</code>.
This way, the constraint <code>1 * x - x = 0</code> holds.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.generic" class="method"><a class="srclink rightside" href="../../src/circuit_construction/writer.rs.html#229-239">source</a><h4 class="code-header">fn <a href="#method.generic" class="fn">generic</a>(&amp;mut self, coeffs: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.array.html">[F; 5]</a>, vars: [<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;&gt;; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.array.html">3</a>])</h4></section></summary><div class="docblock"><p>Adds a generic gate.</p>
<p>Warning: this assumes that some finalization occurs to flush
any queued generic gate.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.scale" class="method"><a class="srclink rightside" href="../../src/circuit_construction/writer.rs.html#246-258">source</a><h4 class="code-header">fn <a href="#method.scale" class="fn">scale</a>(&amp;mut self, x: F, v: <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;) -&gt; <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;</h4></section></summary><div class="docblock"><p>Creates a <code>Generic</code> gate to constrain that a variable <code>v</code> is scaled by an <code>x</code> amount and returns it.
First, it creates a new variable with a scaled value (meaning, the value in <code>v</code> times <code>x</code>).
Then, it creates a row that sets the left wire to be <code>v</code> and the right wire to be the scaled variable.
Finally, it sets the left coefficient to <code>x</code> and the right coefficient to <code>-1</code>.
That way, the constraint <code>x * v - 1 * xv = 0</code> is created.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.add_group" class="method"><a class="srclink rightside" href="../../src/circuit_construction/writer.rs.html#263-326">source</a><h4 class="code-header">fn <a href="#method.add_group" class="fn">add_group</a>(
    &amp;mut self,
    zero: <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;,
    (x1, y1): (<a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;, <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;),
    (x2, y2): (<a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;, <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;)
) -&gt; (<a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;, <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;)</h4></section></summary><div class="docblock"><p>Performs curve point addition.
It creates the corresponding <code>CompleteAdd</code> gate for the points <code>(x1, y1)</code> and <code>(x2,y2)</code>
and returns the third point resulting from the addition as a tuple of variables.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.double" class="method"><a class="srclink rightside" href="../../src/circuit_construction/writer.rs.html#331-333">source</a><h4 class="code-header">fn <a href="#method.double" class="fn">double</a>(
    &amp;mut self,
    zero: <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;,
    (x1, y1): (<a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;, <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;)
) -&gt; (<a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;, <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;)</h4></section></summary><div class="docblock"><p>Doubles one curve point <code>(x1, y1)</code>, using internally the <code>add_group()</code> function.
It creates a <code>CompleteAdd</code> gate for this point addition (with itself).
Returns a tuple of variables corresponding to the doubled point.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.assert_add_group" class="method"><a class="srclink rightside" href="../../src/circuit_construction/writer.rs.html#339-398">source</a><h4 class="code-header">fn <a href="#method.assert_add_group" class="fn">assert_add_group</a>(
    &amp;mut self,
    zero: <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;,
    (x1, y1): (<a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;, <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;),
    (x2, y2): (<a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;, <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;),
    (x3, y3): (<a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;, <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;)
)</h4></section></summary><div class="docblock"><p>Creates a <code>CompleteAdd</code> gate that checks whether a third point <code>(x3, y3)</code> is the addition
of the two first points <code>(x1, y1)</code> and <code>(x2, y2)</code>.
The difference between this function and <code>add_group()</code> is that in <code>assert_add_group</code> the
third point is given, whereas in the other one it is computed with the formula.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.cond_select" class="method"><a class="srclink rightside" href="../../src/circuit_construction/writer.rs.html#425-462">source</a><h4 class="code-header">fn <a href="#method.cond_select" class="fn">cond_select</a>(&amp;mut self, b: <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;, t: <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;, f: <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;) -&gt; <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;</h4></section></summary><div class="docblock"><p>This function is used to include conditionals in circuits.
It creates three <code>Generic</code> gates to simulate the logics of the conditional.
It receives as input:</p>
<ul>
<li><code>b</code>: the branch</li>
<li><code>t</code>: the true</li>
<li><code>f</code>: the false
And simulates the following equation: <code>res = b * ( t - f ) + f</code>
( when the condition is false, <code>res = 1</code> )
( when the condition is  true, <code>res = b</code> )
This is constrained using three <code>Generic</code> gates</li>
</ul>
<ol>
<li>Constrain <code>delta = t - f</code></li>
<li>Constrain <code>res1 = b * delta</code></li>
<li>Constrain <code>res = res1 + f</code>
For (1):</li>
</ol>
<ul>
<li>Creates a row with left wire <code>t</code>, right wire <code>f</code>, and output wire <code>delta</code></li>
<li>Assigns <code>1</code> to the left coefficient, <code>-1</code> to the right coefficient, and <code>-1</code> to the output coefficient.</li>
<li>That way, it creates a first gate constraining: <code>1 * t - 1 * f - delta = 0</code>
For (2):</li>
<li>Creates a row with left wire <code>b</code>, right wire <code>delta</code>, and output wire <code>res1</code>.</li>
<li>Assigns <code>-1</code> to the output coefficient, and <code>1</code> to the multiplication coefficient.</li>
<li>That way, it creates a second gate constraining: <code>-1 * res + 1 * b * delta = 0</code>
For (3):</li>
<li>Creates a row with left wire <code>res1</code>, right wire <code>f</code>, and output wire <code>res</code>.</li>
<li>Assigns <code>1</code> to the left coefficient, <code>1</code> to the right coefficient, and <code>-1</code> to the output coefficient.</li>
<li>That way, it creates a third gate constraining: <code>1 * res1 + 1 * f - 1 * res = 0</code></li>
</ul>
</div></details><details class="toggle method-toggle" open><summary><section id="method.scalar_mul" class="method"><a class="srclink rightside" href="../../src/circuit_construction/writer.rs.html#466-534">source</a><h4 class="code-header">fn <a href="#method.scalar_mul" class="fn">scalar_mul</a>(
    &amp;mut self,
    zero: <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;,
    (xt, yt): (<a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;, <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;),
    scalar: <a class="struct" href="struct.ShiftedScalar.html" title="struct circuit_construction::writer::ShiftedScalar">ShiftedScalar</a>&lt;F&gt;
) -&gt; (<a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;, <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;)</h4></section></summary><div class="docblock"><p>Performs a scalar multiplication between a <a href="struct.ShiftedScalar.html" title="struct circuit_construction::writer::ShiftedScalar"><code>ShiftedScalar</code></a> and a point <code>(xt, yt)</code>.
This function creates 51 rows pairs of rows.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.endo" class="method"><a class="srclink rightside" href="../../src/circuit_construction/writer.rs.html#547-695">source</a><h4 class="code-header">fn <a href="#method.endo" class="fn">endo</a>(
    &amp;mut self,
    zero: <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;,
    constants: &amp;<a class="struct" href="../constants/struct.Constants.html" title="struct circuit_construction::constants::Constants">Constants</a>&lt;F&gt;,
    (xt, yt): (<a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;, <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;),
    scalar: <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;,
    length_in_bits: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>
) -&gt; (<a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;, <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;)</h4></section></summary><div class="docblock"><p>Creates an endoscalar multiplication gadget with <code>length_in_bits/4 + 1</code> gates.
For each row, it adds one <code>EndoMul</code> gate. The gadget is finalized with a <code>Zero</code> gate.</p>
<div><table><thead><tr><th>row</th><th><code>GateType</code></th></tr></thead><tbody>
<tr><td>i</td><td><code>EndoMul</code></td></tr>
<tr><td>i+1</td><td><code>EndoMul</code></td></tr>
<tr><td>…</td><td>…</td></tr>
<tr><td>r</td><td><code>EndoMul</code></td></tr>
<tr><td>r+1</td><td><code>Zero</code></td></tr>
</tbody></table>
</div></div></details><details class="toggle method-toggle" open><summary><section id="method.assert_pack" class="method"><a class="srclink rightside" href="../../src/circuit_construction/writer.rs.html#700-763">source</a><h4 class="code-header">fn <a href="#method.assert_pack" class="fn">assert_pack</a>(&amp;mut self, zero: <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;, x: <a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;, bits_lsb: &amp;[<a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;])</h4></section></summary><div class="docblock"><p>Checks that a string of bits (with LSB first) correspond to the value inside variable <code>x</code>.
It splits the bitstring across rows, where each row takes care of 8 crumbs of 2 bits each.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.poseidon" class="method"><a class="srclink rightside" href="../../src/circuit_construction/writer.rs.html#767-847">source</a><h4 class="code-header">fn <a href="#method.poseidon" class="fn">poseidon</a>(
    &amp;mut self,
    constants: &amp;<a class="struct" href="../constants/struct.Constants.html" title="struct circuit_construction::constants::Constants">Constants</a>&lt;F&gt;,
    input: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;&gt;
) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="struct.Var.html" title="struct circuit_construction::writer::Var">Var</a>&lt;F&gt;&gt;</h4></section></summary><div class="docblock"><p>Creates a Poseidon gadget for given constants and a given input.
It generates a number of <code>Poseidon</code> gates followed by a final <code>Zero</code> gate.</p>
</div></details></div><h2 id="implementors" class="small-section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"><section id="impl-Cs%3CF%3E-for-System%3CF%3E" class="impl"><a class="srclink rightside" href="../../src/circuit_construction/writer.rs.html#911-953">source</a><a href="#impl-Cs%3CF%3E-for-System%3CF%3E" class="anchor">§</a><h3 class="code-header">impl&lt;F: <a class="trait" href="../prologue/trait.PrimeField.html" title="trait circuit_construction::prologue::PrimeField">PrimeField</a>&gt; <a class="trait" href="trait.Cs.html" title="trait circuit_construction::writer::Cs">Cs</a>&lt;F&gt; for <a class="struct" href="struct.System.html" title="struct circuit_construction::writer::System">System</a>&lt;F&gt;</h3></section><section id="impl-Cs%3CF%3E-for-WitnessGenerator%3CF%3E" class="impl"><a class="srclink rightside" href="../../src/circuit_construction/writer.rs.html#850-896">source</a><a href="#impl-Cs%3CF%3E-for-WitnessGenerator%3CF%3E" class="anchor">§</a><h3 class="code-header">impl&lt;F: <a class="trait" href="../prologue/trait.PrimeField.html" title="trait circuit_construction::prologue::PrimeField">PrimeField</a>&gt; <a class="trait" href="trait.Cs.html" title="trait circuit_construction::writer::Cs">Cs</a>&lt;F&gt; for <a class="struct" href="struct.WitnessGenerator.html" title="struct circuit_construction::writer::WitnessGenerator">WitnessGenerator</a>&lt;F&gt;</h3></section></div><script src="../../implementors/circuit_construction/writer/trait.Cs.js" async></script></section></div></main></body></html>